<!DOCTYPE html>
<html>
<head>
    <title>Commenting App</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Bootstrap -->
    <link href="../css/bootstrap.min.css" rel="stylesheet">
    <link href="../css/style.css" rel="stylesheet">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->
</head>
<body>
<div class="container">

    <div class="row">
        <div class="col-sm-8 col-xs-12">
            <div id="cm-wiki" class="col-xs-12">

            </div>
            <div id="cm-comment" class="col-xs-12">
                <div class="row">
                    <div class="col-xs-8">
                        <h4>Comments</h4>
                    </div>
                    <div class="col-xs-4">
                        <input type="text" class="form-control input-sm" placeholder="filter">
                    </div>

                </div>
                   <hr/>
                <div id="cm-boxWrapper">
                     <div class="row">
                         <div class="col-xs-9">
                             <textarea class="cm-box"></textarea>
                         </div>
                         <div class="col-xs-3">
                            <button class="btn btn-default btn-block btn-lg"> Add </button>
                         </div>
                     </div>
                    <div class="row">
                        <div id="cm-commentList" class="col-xs-12">
                                <table class="table table-condensed">
                                    <tr>
                                        <td>
                                            <b>Caner </b>
                                        </td>
                                        <td>
                                            Quisque faucibus convallis eros id viverra. Vestibulum non mauris eu metus viverra bibendum. Suspendisse velit neque, rutrum vitae.
                                        </td>
                                        <td>
                                            <span class="text-muted"> 2 minutes ago </span>
                                        </td>
                                    </tr>
                                </table>
                        </div>
                    </div>

                </div>
            </div>
        </div>
        <div class="col-sm-4 col-xs-12">
            <div id="cm-log">
                <h4>Activity Log </h4>
                <table class="table table-condensed">
                    <tr>
                        <td>
                            <span class="text-muted"> 20 minutes ago </span>
                        </td>
                        <td>
                            Caner Uguz added x to the y.
                        </td>
                    </tr>
                </table>
            </div>
        </div>

    </div>

    <hr/>
</div> <!-- Close Container  -->

<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
<script src="https://code.jquery.com/jquery.js"></script>
<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="../js/bootstrap.min.js"></script>
<script src="mithril.js"></script>
<script type="text/javascript">
(function(){


/* General App Module  */

    // Module name
    var App = {};

    // Model, which only has our list of general data
    App.appData = function(){
        this.script = m.prop("Mithril");
        this.scriptURL = m.prop("http://lhorie.github.io/mithril/");
        this.data = m.request({method: "GET", url: "../app.json"});
    }

    // Controller
    App.controller = function(){
        this.info = new App.appData();

        // Tie to wiki view for home page
        m.module(document.getElementById("cm-wiki"), wiki);
    }

    // View
    App.view = function (controller){
        console.log(controller.info.data().appUser);
        return [m("nav.navbar.navbar-default.navbar-static-top[role='navigation']", [
            m(".container", [
                m(".collapse.navbar-collapse[id='bs-example-navbar-collapse-1']", [
                    m("ul.nav.navbar-nav", [
                        m("li.active", [m("a[href='#']", "Home")]),
                        m("li", [m("a[href='#']", "About")])
                    ]),
                    m("ul.nav.navbar-nav.navbar-right", [
                        m("li", "You are logged in as " + controller.info.data().appUser)
                    ])
                ])
            ]),
            "\n"
        ]),
            m(".jumbotron", [
                m(".container", [
                    m("h2", controller.info.data().appTitle+" Application using " + controller.info.script()),
                    m("p", controller.info.data().appDesc),
                    m("p", [m("a.btn.btn-primary.btn-lg[role='button'][href='"+controller.info.scriptURL()+"']", "Learn more about "+ controller.info.script())])
                ]),
                "\n"
            ])
        ]
    };


/* Wiki Module  */

    var wiki = {};

    wiki.Data = function () {
        this.info = new App.appData();
        this.wikis = m.request({method: "GET", url: "../wiki.json"});
    };

    wiki.controller = function(){
        this.wikiInfo = new wiki.Data();
    }

    wiki.view = function (controller) {
        console.log(controller.wikiInfo.wikis().content);
        return m(".panel.panel-default", [
            m(".panel-heading", [
                m(".row", [
                    m(".col-md-9", [
                        m("h2.panel-title", controller.wikiInfo.wikis().title)
                    ]),
                    m(".col-md-3.cm-wikiBar", [
                        m(".btn-group", [
                            m("button.btn.btn-sm.btn-default[type='button']", "Edit"),
                            m("button.btn.btn-sm.btn-default[type='button']", "Preview")
                        ])
                    ])
                ])
            ]),
            m(".panel-body", [
                m("p", controller.wikiInfo.wikis().content)
            ])
        ])
    };


/* Route - Initializes the app */
    m.route(document.body, "/", {
        "/": App,
        "/app" : App
    });


    }());
</script>
</body>
</html>